<div align="center">
  <h1>ğŸ¨ Sketch</h1>
  <p>ç»„ä»¶åŒ–çš„ Canvas 2D ç»˜å›¾æ¡†æ¶ï¼Œæ”¯æŒ Vue / Reactï¼Œå¯åœ¨å°ç¨‹åºä¸ Web ä¸Šä½¿ç”¨</p>

  <a href="https://www.npmjs.com/package/@sketchjs/runtime">
    <img src="https://img.shields.io/npm/v/@sketchjs/runtime.svg?style=flat-square">
  </a>
  <a href="https://www.npmjs.com/package/@sketchjs/runtime">
    <img src="https://img.shields.io/npm/l/@sketchjs/runtime.svg?style=flat-square">
  </a>
  <a href="https://www.npmjs.com/package/@sketchjs/runtime">
    <img src="https://img.shields.io/npm/dt/@sketchjs/runtime.svg?style=flat-square">
  </a>
  <a href="https://codecov.io/gh/panyu97py/sketch" > 
  <img src="https://codecov.io/gh/panyu97py/sketch/graph/badge.svg?token=y06kPnzJaQ"/> 
  </a>
  <a href="https://github.com/panyu97py/sketch">
    <img src="https://img.shields.io/github/commit-activity/w/panyu97py/sketch" alt="GitHub commit activity">
  </a>
</div>

## ğŸ“– ç®€ä»‹

Sketch æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„ Canvas 2D ç»˜å›¾æ¡†æ¶ã€‚ä½ å¯ä»¥åƒå†™ React Native ä¸€æ ·ç»„ç»‡ç»˜å›¾é€»è¾‘ï¼Œç”¨ç»„ä»¶å’Œæ ·å¼å®Œæˆå¸ƒå±€ã€æ’ç‰ˆä¸æ¸²æŸ“ï¼Œå¹¶åœ¨
Webã€H5ã€å°ç¨‹åºç­‰ç¯å¢ƒä¸­å¤ç”¨ä¸€å¥—ç»˜å›¾ä»£ç ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **ç»„ä»¶åŒ–ç»˜å›¾** - ä½¿ç”¨ç†Ÿæ‚‰çš„ç»„ä»¶è¯­æ³•ç®¡ç†å¤æ‚ Canvas ç»˜å›¾é€»è¾‘
- ğŸ“± **è·¨å¹³å°æ”¯æŒ** - ä¸€å¥—ä»£ç åœ¨ Webã€H5ã€å°ç¨‹åºä¸­è¿è¡Œ
- ğŸ¨ **Flexbox å¸ƒå±€** - åŸºäº Yoga Layout çš„å¼ºå¤§å¸ƒå±€ç³»ç»Ÿ
- ğŸš€ **é«˜æ€§èƒ½æ¸²æŸ“** - ä¼˜åŒ–çš„æ¸²æŸ“è°ƒåº¦å’Œäº‹ä»¶å¤„ç†
- ğŸ’ª **TypeScript æ”¯æŒ** - å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œå¼€å‘ä½“éªŒ

###  ä¸ºä»€ä¹ˆä½¿ç”¨ Sketch

- ç”¨ç»„ä»¶ç»“æ„ç®¡ç†å¤æ‚ç»˜å›¾ï¼Œé¿å…åˆ°å¤„æ•£è½çš„ Canvas æŒ‡ä»¤
- ä½¿ç”¨ Flexbox å¸ƒå±€ç›´æ¥å®Œæˆæ’ç‰ˆï¼Œæ— éœ€æ‰‹å†™åæ ‡è®¡ç®—
- è¿è¡Œæ—¶ä¸æ¡†æ¶è§£è€¦ï¼ŒWeb/H5/å°ç¨‹åºä¿æŒä¸€è‡´çš„æ¸²æŸ“é€»è¾‘

###  åŠŸèƒ½æ¦‚è§ˆ

- æ¸²æŸ“æ ‘ï¼šRoot/View/Text/Image ç­‰åŸºç¡€èŠ‚ç‚¹
- å¸ƒå±€ç³»ç»Ÿï¼šYoga Layout + Flexbox
- æ ·å¼ç³»ç»Ÿï¼šStyleSheet ç®¡ç†æ ·å¼ä¸å¸ƒå±€
- äº‹ä»¶ç³»ç»Ÿï¼šåˆå§‹åŒ–ä¸èŠ‚ç‚¹æ›´æ–°äº‹ä»¶

###  ç‰¹æ€§

- ç»„ä»¶åŒ–ç»˜å›¾ï¼Œå¤æ‚å›¾å½¢å¯å¤ç”¨ä¸ç»„åˆ
- è·¨å¹³å°æ”¯æŒï¼ŒWeb/H5/å°ç¨‹åºä¸€è‡´çš„å¼€å‘ä½“éªŒ
- Yoga Layout é©±åŠ¨çš„ Flexbox å¸ƒå±€
- å®Œæ•´ TypeScript ç±»å‹å®šä¹‰

###  æ¶æ„æ¦‚è§ˆ

- `@sketchjs/runtime`ï¼šè¿è¡Œæ—¶æ ¸å¿ƒï¼Œç»´æŠ¤æ¸²æŸ“æ ‘ã€å¸ƒå±€ä¸ç»˜åˆ¶
- `@sketchjs/react` / `@sketchjs/vue`ï¼šæ¡†æ¶å±‚å°è£…ï¼Œè´Ÿè´£ç»„ä»¶æ¸²æŸ“ä¸ç”Ÿå‘½å‘¨æœŸå¯¹æ¥
- `@sketchjs/yoga-layout`ï¼šYoga å¸ƒå±€å¼•æ“çš„ WebAssembly ç‰ˆæœ¬

## ğŸ“± å¹³å°å…¼å®¹

| å¹³å°       | æ”¯æŒçŠ¶æ€   | è¯´æ˜              |
|----------|--------|-----------------|
| Web / H5 | âœ… å®Œå…¨æ”¯æŒ | ä½¿ç”¨æ ‡å‡† Canvas API |
| å¾®ä¿¡å°ç¨‹åº    | âœ… æ”¯æŒ   | é€šè¿‡ Taro ç­‰æ¡†æ¶é€‚é…   |
| æ”¯ä»˜å®å°ç¨‹åº   | âœ… æ”¯æŒ   | é€šè¿‡ Taro ç­‰æ¡†æ¶é€‚é…   |

## ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ

### æ¸²æŸ“æ ‘ç»“æ„

Sketch ä½¿ç”¨ç±»ä¼¼ React Native çš„æ¸²æŸ“æ ‘ç»“æ„ï¼š

```
Sketch.Root
â”œâ”€â”€ Sketch.View
â”‚   â”œâ”€â”€ Sketch.Text
â”‚   â”œâ”€â”€ Sketch.Image
â”‚   â””â”€â”€ Sketch.View
â””â”€â”€ Sketch.View
```

### å¸ƒå±€ç³»ç»Ÿ

åŸºäº [Yoga Layout](https://yogalayout.com/) çš„ Flexbox å¸ƒå±€å¼•æ“ï¼š

- æ”¯æŒ `flexDirection`, `justifyContent`, `alignItems` ç­‰å±æ€§
- è‡ªåŠ¨è®¡ç®—å…ƒç´ ä½ç½®å’Œå°ºå¯¸
- å“åº”å¼å¸ƒå±€æ”¯æŒ

### æ ·å¼ç³»ç»Ÿ

ä½¿ç”¨ `StyleSheet.create()` åˆ›å»ºæ ·å¼å¯¹è±¡ï¼š

```ts
const styles = StyleSheet.create({
  container: {
    width: 300,
    height: 200,
    backgroundColor: '#f0f0f0',
    justifyContent: 'center',
    alignItems: 'center'
  },
  text: {
    fontSize: 16,
    color: '#333',
    fontWeight: 'bold'
  }
})
```

## ğŸ“¦ åŒ…è¯´æ˜

| åŒ…å                                                                 | ç‰ˆæœ¬                                                                                                                    | æè¿°                         |
|--------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|----------------------------|
| [`@sketchjs/runtime`](./packages/sketch-runtime/README.md)         | [![npm](https://img.shields.io/npm/v/@sketchjs/runtime.svg)](https://www.npmjs.com/package/@sketchjs/runtime)         | è¿è¡Œæ—¶æ ¸å¿ƒä¸æ¸²æŸ“è°ƒåº¦                 |
| [`@sketchjs/react`](./packages/sketch-framework-react/README.md)   | [![npm](https://img.shields.io/npm/v/@sketchjs/react.svg)](https://www.npmjs.com/package/@sketchjs/react)             | React ç»„ä»¶å°è£…                 |
| [`@sketchjs/vue`](./packages/sketch-framework-vue/README.md)       | [![npm](https://img.shields.io/npm/v/@sketchjs/vue.svg)](https://www.npmjs.com/package/@sketchjs/vue)                 | Vue ç»„ä»¶å°è£…                   |
| [`@sketchjs/yoga-layout`](./packages/sketch-yoga-layout/README.md) | [![npm](https://img.shields.io/npm/v/@sketchjs/yoga-layout.svg)](https://www.npmjs.com/package/@sketchjs/yoga-layout) | Yoga Layout WebAssembly ç‰ˆæœ¬ |


## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

æ ¹æ®ä½ çš„æ¡†æ¶é€‰æ‹©å®‰è£…å¯¹åº”çš„åŒ…ï¼š

#### **React**

##### npm

```sh
npm add @sketchjs/react
```

##### pnpm

```sh
pnpm add @sketchjs/react
```

##### yarn

```sh
yarn add @sketchjs/react
```

#### **Vue**

##### npm

```sh
npm add @sketchjs/vue
```

##### pnpm

```sh
pnpm add @sketchjs/vue
```

##### yarn

```sh
yarn add @sketchjs/vue
```

#### **ä»…è¿è¡Œæ—¶ï¼ˆé«˜çº§ç”¨æ³•ï¼‰**

##### npm

```sh
npm add @sketchjs/runtime
```

##### pnpm

```sh
pnpm add @sketchjs/runtime
```

##### yarn

```sh
yarn add @sketchjs/runtime
```

### ç¤ºä¾‹ï¼ˆReactï¼‰

```tsx
import React, { useEffect, useRef } from 'react'
import { Sketch, StyleSheet } from '@sketchjs/react'

const styles = StyleSheet.create({
  root: {
    width: 500,
    height: 500,
    backgroundColor: '#ffffff'
  },
  view: {
    width: 500,
    height: 500,
    justifyContent: 'center',
    alignItems: 'center'
  },
  text: {
    fontSize: 36,
    color: '#333333'
  }
})

export default function App () {
  const sketch = Sketch.useSketch()
  const canvasRef = useRef<HTMLCanvasElement>(null)

  useEffect(() => {
    const canvas = canvasRef.current
    const ctx = canvas?.getContext('2d')
    if (!canvas || !ctx) return
    sketch.init({
      canvas,
      ctx
    })
  }, [])

  return (
    <div>
      <canvas ref={canvasRef}/>
      <Sketch.Root sketch={sketch} autoRender style={styles.root}>
        <Sketch.View style={styles.view}>
          <Sketch.Text text="Hello Sketch" style={styles.text}/>
        </Sketch.View>
      </Sketch.Root>
    </div>
  )
}
```

### ç¤ºä¾‹ï¼ˆVueï¼‰

```vue

<template>
  <div>
    <canvas ref="canvasRef"/>
    <SketchRoot :sketch="sketch" :auto-render="true" :style="styles.root">
      <SketchView :style="styles.view">
        <SketchText text="Hello Sketch" :style="styles.text"/>
      </SketchView>
    </SketchRoot>
  </div>
</template>

<script setup lang="ts">
  import { ref, onMounted } from 'vue'
  import { useSketch, SketchRoot, SketchView, SketchText, StyleSheet } from '@sketchjs/vue'

  const styles = StyleSheet.create({
    root: {
      width: 500,
      height: 500,
      backgroundColor: '#ffffff'
    },
    view: {
      width: 500,
      height: 500,
      justifyContent: 'center',
      alignItems: 'center'
    },
    text: {
      fontSize: 36,
      color: '#333333'
    }
  })

  const sketch = useSketch()
  const canvasRef = ref<HTMLCanvasElement>()

  onMounted(() => {
    const canvas = canvasRef.value
    const ctx = canvas?.getContext('2d')
    if (!canvas || !ctx) return
    sketch.init({
      canvas,
      ctx
    })
  })
</script>
```

## ğŸ”§ è¿›é˜¶ç”¨æ³•

### æ‰‹åŠ¨æ¸²æŸ“æ§åˆ¶

å½“ `autoRender` è®¾ç½®ä¸º `false` æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æ§åˆ¶æ¸²æŸ“ï¼š

```tsx
const sketch = Sketch.useSketch()

// æ‰‹åŠ¨è§¦å‘æ¸²æŸ“
sketch.render()

// æ‰¹é‡æ›´æ–°åæ¸²æŸ“
sketch.batchUpdate(() => {
  // å¤šä¸ªæ›´æ–°æ“ä½œ
  element1.updateStyle(newStyle1)
  element2.updateStyle(newStyle2)
})
sketch.render()
```

### äº‹ä»¶å¤„ç†

ç›‘å¬å…ƒç´ å¸ƒå±€å’Œæ›´æ–°äº‹ä»¶ï¼š

```tsx
<Sketch.View
  style={styles.view}
  onLayout={(layout) => {
    console.log('å¸ƒå±€å®Œæˆ:', layout)
  }}
  onUpdate={(element) => {
    console.log('å…ƒç´ æ›´æ–°:', element)
  }}
>
  <Sketch.Text text="å¯äº¤äº’æ–‡æœ¬"/>
</Sketch.View>
```

### è‡ªå®šä¹‰å…ƒç´ 

é€šè¿‡æ‰©å±•åŸºç¡€å…ƒç´ åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼š

```ts
import { SketchElement } from '@sketchjs/runtime'

class CustomElement extends SketchElement {
  render (ctx: CanvasRenderingContext2D) {
    // è‡ªå®šä¹‰ç»˜åˆ¶é€»è¾‘
    ctx.fillStyle = this.style.backgroundColor || '#000'
    ctx.fillRect(this.layout.left, this.layout.top, this.layout.width, this.layout.height)
  }
}
```



## â“ å¸¸è§é—®é¢˜

### Q: Sketch.Root çš„å°ºå¯¸è®¾ç½®æœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ

A: `Sketch.Root` çš„ `width/height` å†³å®šäº†ç”»å¸ƒçš„åƒç´ å°ºå¯¸ï¼Œåº”ä¸ Canvas å…ƒç´ çš„å®é™…å°ºå¯¸ä¸€è‡´ã€‚

### Q: å¦‚ä½•åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ï¼Ÿ

A: é€šè¿‡ Taro ç­‰è·¨ç«¯æ¡†æ¶ï¼Œä½¿ç”¨å¯¹åº”çš„è¿è¡Œæ—¶é€‚é…å™¨ã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

A: æ”¯æŒå¸¸è§çš„å›¾ç‰‡æ ¼å¼ï¼ˆPNGã€JPEGã€GIFã€WebPï¼‰ï¼Œå…·ä½“å–å†³äºè¿è¡Œç¯å¢ƒçš„æ”¯æŒæƒ…å†µã€‚



## â¤ï¸ æ”¯æŒé¡¹ç›® / Sponsor

å¦‚æœä½ è§‰å¾— Sketch å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¯æŒé¡¹ç›®ï¼š


### â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥è¯·ä½œè€…å–æ¯å’–å•¡ â˜•
æ¯ä¸€ä»½æ”¯æŒï¼Œéƒ½ä¼šè½¬åŒ–ä¸ºæ›´ç¨³å®šã€æ›´å¥½ç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚

|                           å¾®ä¿¡                            |                           æ”¯ä»˜å®                           |
|:-------------------------------------------------------:|:-------------------------------------------------------:|
| <img src="./assets/wechat-pay-code.JPG" height="200" /> | <img src="./assets/alipay-pay-code.JPG" height="200" /> |

æ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œå¼€æºä¸æ˜“ â¤ï¸

### ğŸŒŸ å…¶ä»–æ”¯æŒæ–¹å¼

* ç»™ä»“åº“ç‚¹ä¸€ä¸ª â­ï¸
* åœ¨ issue / discussion åˆ†äº«ä½ çš„ä½¿ç”¨åé¦ˆ
* åœ¨å›¢é˜Ÿæˆ–ç¤¾åŒºä¸­æ¨èæœ¬é¡¹ç›®

è¿™äº›éƒ½ä¼šå¯¹é¡¹ç›®éå¸¸æœ‰å¸®åŠ© ğŸ™Œ

## ğŸ“„ è®¸å¯è¯

MIT License
